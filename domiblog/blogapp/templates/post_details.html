{% extends 'base.html' %}
{% block title %}{{post.tag}}{% endblock %}

{% block content %}

<h1>{{ post.title }}</h1>
<small> 
    Written by: {{ post.author }} <br>
    {{post.publication_date}} |
    <a href="{% url 'category' post.category|slugify%}">{{ post.category }}</a>
    {% if user.is_authenticated %}
        {% if user.id == 1 %}
            | 
            <a href="{% url 'update_post' post.pk %}">Edit</a> - 
            <a href="{% url 'delete_post' post.pk %}">Delete</a>
        {% endif %}
    {% endif %}
</small>
<hr>
{{ post.body|safe }}

<hr>

<form action="{% url 'like_post' post.pk %}"" method="POST">
    {% csrf_token %}
    {% if user.is_authenticated %}
        {% if liked %}
            <button type="submit", name="post_id", value="{{ post.id }}", class="btn btn-danger" >Unlike</button>
        {% else %}
            <button type="submit", name="post_id", value="{{ post.id }}", class="btn btn-primary" >Like</button>
        {% endif %} 
    {% else %}
    <a  href="{%url 'login'%}">Log In</a> to like
    {% endif %} 
    - {{ total_likes }} Likes
</form>
<br>
<a href="{% url 'home' %}" class="btn btn-secondary">Back</a>

{% endblock %}